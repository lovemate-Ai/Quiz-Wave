<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üéôÔ∏è Smart Voice Search</title>
<style>
  body {
    font-family: "Poppins", sans-serif;
    margin: 0;
    background: var(--bg);
    color: var(--text);
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: all 0.3s ease;
  }
  :root {
    --bg: #0d1117;
    --text: #fff;
    --card: #161b22;
  }
  .light {
    --bg: #f8f9fa;
    --text: #000;
    --card: #fff;
  }
  h1 {
    margin-top: 30px;
  }
  #searchBox {
    width: 80%;
    max-width: 400px;
    padding: 12px;
    font-size: 18px;
    border-radius: 12px;
    border: none;
    outline: none;
    background: var(--card);
    color: var(--text);
  }
  #voiceBtn {
    margin-top: 20px;
    padding: 12px 25px;
    border-radius: 30px;
    border: none;
    background: #28a745;
    color: white;
    font-size: 18px;
    cursor: pointer;
    transition: 0.3s;
  }
  #voiceBtn:hover { background: #218838; }
  #results {
    margin-top: 25px;
    width: 90%;
    max-width: 600px;
    background: var(--card);
    border-radius: 15px;
    padding: 15px;
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
  }
  .result-item {
    margin-bottom: 15px;
  }
  #themeToggle {
    position: fixed;
    top: 10px;
    right: 15px;
    padding: 10px 18px;
    border: none;
    border-radius: 25px;
    background: #007bff;
    color: white;
    cursor: pointer;
  }
</style>
</head>
<body>
<button id="themeToggle">üåô</button>
<h1>üéôÔ∏è Smart Voice Search</h1>
<input type="text" id="searchBox" placeholder="Type or say something..." />
<button id="voiceBtn">üé§ Speak</button>

<div id="results"></div>

<script>
const searchBox = document.getElementById('searchBox');
const resultsDiv = document.getElementById('results');
const voiceBtn = document.getElementById('voiceBtn');
const themeToggle = document.getElementById('themeToggle');

let darkMode = true;
themeToggle.onclick = () => {
  document.body.classList.toggle('light');
  darkMode = !darkMode;
  themeToggle.textContent = darkMode ? "üåô" : "‚òÄÔ∏è";
};

// Voice recognition setup
window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();
recognition.lang = 'en-US';
recognition.interimResults = false;

voiceBtn.onclick = () => {
  recognition.start();
  voiceBtn.textContent = "üéß Listening...";
};

recognition.onresult = async (event) => {
  const command = event.results[0][0].transcript.toLowerCase();
  voiceBtn.textContent = "üé§ Speak";
  searchBox.value = command;
  handleCommand(command);
};

function handleCommand(cmd) {
  if (cmd.includes('search')) {
    const query = cmd.replace('search', '').trim();
    if (query) performSearch(query);
  } else if (cmd.includes('scroll down')) {
    window.scrollBy(0, 500);
  } else if (cmd.includes('scroll up')) {
    window.scrollBy(0, -500);
  } else if (cmd.includes('next')) {
    window.scrollBy(0, 800);
  } else if (cmd.includes('back')) {
    window.scrollBy(0, -800);
  } else if (cmd.includes('read result')) {
    speakText(resultsDiv.innerText);
  } else {
    performSearch(cmd);
  }
}

async function performSearch(query) {
  resultsDiv.innerHTML = "<p>üîç Searching for <b>" + query + "</b>...</p>";
  try {
    const response = await fetch(`https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json`);
    const data = await response.json();
    let html = `<h3>Results for "${query}"</h3>`;
    if (data.RelatedTopics.length > 0) {
      data.RelatedTopics.slice(0, 5).forEach(item => {
        if (item.Text && item.FirstURL) {
          html += `<div class="result-item"><a href="${item.FirstURL}" target="_blank">${item.Text}</a></div>`;
        }
      });
    } else {
      html += "<p>No results found.</p>";
    }
    resultsDiv.innerHTML = html;
  } catch (err) {
    resultsDiv.innerHTML = "<p>‚ùå Error fetching results.</p>";
  }
}

function speakText(text) {
  const speech = new SpeechSynthesisUtterance(text);
  speech.lang = "en-US";
  window.speechSynthesis.speak(speech);
}
</script>
</body>
</html>
