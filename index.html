<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéôÔ∏è Smart Voice Browser</title>
<style>
body{
  background:#101010;color:white;font-family:'Poppins',sans-serif;
  text-align:center;padding:10px;
}
input,button{
  padding:10px;margin:5px;border:none;border-radius:10px;font-size:16px;
}
button{cursor:pointer;color:white;background:#0d6efd;}
.voice{background:#fbbc05;}
iframe{
  width:95%;height:75vh;margin-top:10px;border:2px solid #333;border-radius:12px;
}
h2{color:#0df;color:#0dcaf0;text-shadow:0 0 10px #0dcaf0;}
</style>
</head>
<body>
<h2>üéôÔ∏è Smart Voice Controlled Browser</h2>
<input type="text" id="url" placeholder="Type or say a website/search..." style="width:60%;">
<button onclick="go()">Go</button>
<button class="voice" onclick="startVoice()">üé§ Speak</button>
<iframe id="view"></iframe>

<script>
const iframe=document.getElementById("view");
let recognition;

// main go function
function go(){
  const input=document.getElementById("url").value.trim();
  if(!input) return;
  let finalURL=input;

  // search detection
  if(!input.startsWith("http") && !input.includes(".")){
    finalURL=`https://www.google.com/search?q=${encodeURIComponent(input)}`;
  }else if(!input.startsWith("http")){
    finalURL=`https://${input}`;
  }
  
  iframe.src=finalURL;
  sessionStorage.clear();
  localStorage.clear();
}

// voice recognition
function startVoice(){
  if(!('webkitSpeechRecognition' in window)){
    alert("‚ùå Voice not supported in this browser");
    return;
  }

  recognition=new webkitSpeechRecognition();
  recognition.lang="en-US";
  recognition.start();
  recognition.onresult=function(event){
    const command=event.results[0][0].transcript.toLowerCase();
    document.getElementById("url").value=command;
    handleCommand(command);
  };
}

// smart commands
function handleCommand(cmd){
  if(cmd.includes("open ")){
    const site=cmd.replace("open ","").replace("go to ","").trim().replace(" ","");
    iframe.src=`https://${site}`;
  }
  else if(cmd.includes("search ")){
    const query=cmd.replace("search ","").trim();
    iframe.src=`https://www.google.com/search?q=${encodeURIComponent(query)}`;
  }
  else if(cmd.includes("scroll down")){
    iframe.contentWindow.scrollBy(0,300);
  }
  else if(cmd.includes("scroll up")){
    iframe.contentWindow.scrollBy(0,-300);
  }
  else if(cmd.includes("go back") || cmd.includes("back")){
    iframe.contentWindow.history.back();
  }
  else if(cmd.includes("go forward") || cmd.includes("forward")){
    iframe.contentWindow.history.forward();
  }
  else if(cmd.includes("reload") || cmd.includes("refresh")){
    iframe.contentWindow.location.reload();
  }
  else if(cmd.includes("stop")){
    iframe.contentWindow.stop();
  }
  else if(cmd.includes("home")){
    iframe.src="about:blank";
  }
  else{
    // default: treat as search
    iframe.src=`https://www.google.com/search?q=${encodeURIComponent(cmd)}`;
  }
}
</script>
</body>
</html>
